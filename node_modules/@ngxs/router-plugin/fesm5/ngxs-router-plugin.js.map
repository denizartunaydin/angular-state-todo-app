{"version":3,"file":"ngxs-router-plugin.js","sources":["ng:/@ngxs/router-plugin/src/router.actions.ts","ng:/@ngxs/router-plugin/src/serializer.ts","ng:/@ngxs/router-plugin/src/router.state.ts","ng:/@ngxs/router-plugin/src/router.module.ts"],"names":["tslib_1.__decorate"],"mappings":"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","sourcesContent":["import {\r\n  NavigationCancel,\r\n  NavigationError,\r\n  NavigationExtras,\r\n  Params,\r\n  RouterStateSnapshot,\r\n  RoutesRecognized,\r\n  ResolveEnd\r\n} from '@angular/router';\r\n\r\nimport { RouterTrigger } from './router.state';\r\n\r\n/**\r\n * Public event api of the router\r\n */\r\nexport class Navigate {\r\n  static get type() {\r\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\r\n    return '[Router] Navigate';\r\n  }\r\n  constructor(\r\n    public path: any[],\r\n    public queryParams?: Params,\r\n    public extras?: NavigationExtras\r\n  ) {}\r\n}\r\n\r\n/**\r\n *\r\n * Angular Routers internal state events\r\n *\r\n */\r\n\r\n/**\r\n * An action dispatched when the router navigates.\r\n */\r\nexport class RouterNavigation<T = RouterStateSnapshot> {\r\n  static get type() {\r\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\r\n    return '[Router] RouterNavigation';\r\n  }\r\n  constructor(\r\n    public routerState: T,\r\n    public event: RoutesRecognized,\r\n    public trigger: RouterTrigger = 'none'\r\n  ) {}\r\n}\r\n\r\n/**\r\n * An action dispatched when the router cancel navigation.\r\n */\r\nexport class RouterCancel<T, V = RouterStateSnapshot> {\r\n  static get type() {\r\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\r\n    return '[Router] RouterCancel';\r\n  }\r\n  constructor(\r\n    public routerState: V,\r\n    public storeState: T,\r\n    public event: NavigationCancel,\r\n    public trigger: RouterTrigger = 'none'\r\n  ) {}\r\n}\r\n\r\n/**\r\n * An action dispatched when the router errors.\r\n */\r\nexport class RouterError<T, V = RouterStateSnapshot> {\r\n  static get type() {\r\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\r\n    return '[Router] RouterError';\r\n  }\r\n  constructor(\r\n    public routerState: V,\r\n    public storeState: T,\r\n    public event: NavigationError,\r\n    public trigger: RouterTrigger = 'none'\r\n  ) {}\r\n}\r\n\r\n/**\r\n * An action dispatched when the `ResolveEnd` event is triggered.\r\n */\r\nexport class RouterDataResolved<T = RouterStateSnapshot> {\r\n  static get type() {\r\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\r\n    return '[Router] RouterDataResolved';\r\n  }\r\n  constructor(\r\n    public routerState: T,\r\n    public event: ResolveEnd,\r\n    public trigger: RouterTrigger = 'none'\r\n  ) {}\r\n}\r\n\r\n/**\r\n * An union type of router actions.\r\n */\r\nexport type RouterAction<T, V = RouterStateSnapshot> =\r\n  | RouterNavigation<V>\r\n  | RouterCancel<T, V>\r\n  | RouterError<T, V>\r\n  | RouterDataResolved<V>;\r\n","import { ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\n\r\nexport abstract class RouterStateSerializer<T> {\r\n  abstract serialize(routerState: RouterStateSnapshot): T;\r\n}\r\n\r\nexport interface SerializedRouterStateSnapshot {\r\n  root: ActivatedRouteSnapshot;\r\n  url: string;\r\n}\r\n\r\nexport class DefaultRouterStateSerializer\r\n  implements RouterStateSerializer<SerializedRouterStateSnapshot> {\r\n  serialize(routerState: RouterStateSnapshot): SerializedRouterStateSnapshot {\r\n    return {\r\n      root: this.serializeRoute(routerState.root),\r\n      url: routerState.url\r\n    };\r\n  }\r\n\r\n  private serializeRoute(route: ActivatedRouteSnapshot): ActivatedRouteSnapshot {\r\n    const children = route.children.map(c => this.serializeRoute(c));\r\n    return {\r\n      url: route.url,\r\n      params: route.params,\r\n      queryParams: route.queryParams,\r\n      fragment: route.fragment,\r\n      data: route.data,\r\n      outlet: route.outlet,\r\n      component: null,\r\n      routeConfig: null,\r\n      root: null as any,\r\n      parent: null,\r\n      firstChild: children[0],\r\n      children: children,\r\n      pathFromRoot: null as any,\r\n      paramMap: route.paramMap,\r\n      queryParamMap: route.queryParamMap,\r\n      toString: route.toString\r\n    };\r\n  }\r\n}\r\n","import { NgZone, Injectable } from '@angular/core';\r\nimport {\r\n  NavigationCancel,\r\n  NavigationError,\r\n  Router,\r\n  RouterStateSnapshot,\r\n  RoutesRecognized,\r\n  ResolveEnd,\r\n  UrlSerializer,\r\n  NavigationStart,\r\n  NavigationEnd\r\n} from '@angular/router';\r\nimport { LocationStrategy, Location } from '@angular/common';\r\nimport { Action, Selector, State, StateContext, Store } from '@ngxs/store';\r\nimport { isAngularInTestMode } from '@ngxs/store/internals';\r\nimport { first } from 'rxjs/operators';\r\n\r\nimport {\r\n  Navigate,\r\n  RouterAction,\r\n  RouterCancel,\r\n  RouterError,\r\n  RouterNavigation,\r\n  RouterDataResolved\r\n} from './router.actions';\r\nimport { RouterStateSerializer } from './serializer';\r\n\r\nexport interface RouterStateModel<T = RouterStateSnapshot> {\r\n  state?: T;\r\n  navigationId?: number;\r\n  trigger: RouterTrigger;\r\n}\r\n\r\nexport type RouterTrigger = 'none' | 'router' | 'store';\r\n\r\n@State<RouterStateModel>({\r\n  name: 'router',\r\n  defaults: {\r\n    state: undefined,\r\n    navigationId: undefined,\r\n    trigger: 'none'\r\n  }\r\n})\r\n@Injectable()\r\nexport class RouterState {\r\n  /**\r\n   * Determines how navigation was performed by the `RouterState` itself\r\n   * or outside via `new Navigate(...)`\r\n   */\r\n  private _trigger: RouterTrigger = 'none';\r\n\r\n  /**\r\n   * That's the serialized state from the `Router` class\r\n   */\r\n  private _routerState: RouterStateSnapshot | null = null;\r\n\r\n  /**\r\n   * That's the value of the `RouterState` state\r\n   */\r\n  private _storeState: RouterStateModel | null = null;\r\n\r\n  private _lastRoutesRecognized: RoutesRecognized = null!;\r\n\r\n  @Selector()\r\n  static state<T = RouterStateSnapshot>(state: RouterStateModel<T>) {\r\n    return state && state.state;\r\n  }\r\n\r\n  @Selector()\r\n  static url(state: RouterStateModel): string | undefined {\r\n    return state && state.state && state.state.url;\r\n  }\r\n\r\n  constructor(\r\n    private _store: Store,\r\n    private _router: Router,\r\n    private _serializer: RouterStateSerializer<RouterStateSnapshot>,\r\n    private _ngZone: NgZone,\r\n    private _urlSerializer: UrlSerializer,\r\n    private _locationStrategy: LocationStrategy,\r\n    private _location: Location\r\n  ) {\r\n    this.setUpStoreListener();\r\n    this.setUpRouterEventsListener();\r\n    this.checkInitialNavigationOnce();\r\n  }\r\n\r\n  @Action(Navigate)\r\n  navigate(_: StateContext<RouterStateModel>, action: Navigate) {\r\n    return this._ngZone.run(() =>\r\n      this._router.navigate(action.path, {\r\n        queryParams: action.queryParams,\r\n        ...action.extras\r\n      })\r\n    );\r\n  }\r\n\r\n  @Action([RouterNavigation, RouterError, RouterCancel, RouterDataResolved])\r\n  angularRouterAction(\r\n    ctx: StateContext<RouterStateModel>,\r\n    action: RouterAction<RouterStateModel, RouterStateSnapshot>\r\n  ): void {\r\n    ctx.setState({\r\n      ...ctx.getState(),\r\n      trigger: action.trigger,\r\n      state: action.routerState,\r\n      navigationId: action.event.id\r\n    });\r\n  }\r\n\r\n  private setUpStoreListener(): void {\r\n    this._store.select(RouterState).subscribe((state: RouterStateModel | undefined) => {\r\n      this.navigateIfNeeded(state);\r\n    });\r\n  }\r\n\r\n  private setUpRouterEventsListener(): void {\r\n    this._router.events.subscribe(event => {\r\n      if (event instanceof NavigationStart) {\r\n        this.navigationStart();\r\n      } else if (event instanceof RoutesRecognized) {\r\n        this._lastRoutesRecognized = event;\r\n      } else if (event instanceof ResolveEnd) {\r\n        this.dispatchRouterDataResolved(event);\r\n      } else if (event instanceof NavigationCancel) {\r\n        this.dispatchRouterCancel(event);\r\n        this.reset();\r\n      } else if (event instanceof NavigationError) {\r\n        this.dispatchRouterError(event);\r\n        this.reset();\r\n      } else if (event instanceof NavigationEnd) {\r\n        this.navigationEnd();\r\n        this.reset();\r\n      }\r\n    });\r\n  }\r\n\r\n  private navigationStart(): void {\r\n    this._routerState = this._serializer.serialize(this._router.routerState.snapshot);\r\n\r\n    if (this._trigger !== 'none') {\r\n      this._storeState = this._store.selectSnapshot(RouterState);\r\n    }\r\n  }\r\n\r\n  private navigationEnd(): void {\r\n    if (this.shouldDispatchRouterNavigation()) {\r\n      this.dispatchRouterNavigation();\r\n    }\r\n  }\r\n\r\n  private shouldDispatchRouterNavigation(): boolean {\r\n    if (!this._storeState) return true;\r\n    return this._trigger !== 'store';\r\n  }\r\n\r\n  private navigateIfNeeded(state: RouterStateModel | undefined): void {\r\n    const canSkipNavigation =\r\n      !this._storeState ||\r\n      !this._storeState.state ||\r\n      !state ||\r\n      state.trigger === 'router' ||\r\n      this._router.url === this._storeState.state.url;\r\n\r\n    if (canSkipNavigation) {\r\n      return;\r\n    }\r\n\r\n    this._trigger = 'store';\r\n    this._ngZone.run(() => {\r\n      this._router.navigateByUrl(this._storeState!.state!.url);\r\n    });\r\n  }\r\n\r\n  private dispatchRouterNavigation(): void {\r\n    const nextRouterState = this._serializer.serialize(this._lastRoutesRecognized.state);\r\n\r\n    this.dispatchRouterAction(\r\n      new RouterNavigation(\r\n        nextRouterState,\r\n        new RoutesRecognized(\r\n          this._lastRoutesRecognized.id,\r\n          this._lastRoutesRecognized.url,\r\n          this._lastRoutesRecognized.urlAfterRedirects,\r\n          nextRouterState\r\n        ),\r\n        this._trigger\r\n      )\r\n    );\r\n  }\r\n\r\n  private dispatchRouterCancel(event: NavigationCancel): void {\r\n    this.dispatchRouterAction(\r\n      new RouterCancel(this._routerState!, this._storeState, event, this._trigger)\r\n    );\r\n  }\r\n\r\n  private dispatchRouterError(event: NavigationError): void {\r\n    this.dispatchRouterAction(\r\n      new RouterError(\r\n        this._routerState!,\r\n        this._storeState,\r\n        new NavigationError(event.id, event.url, `${event}`),\r\n        this._trigger\r\n      )\r\n    );\r\n  }\r\n\r\n  private dispatchRouterAction<T>(action: RouterAction<T>): void {\r\n    this._trigger = 'router';\r\n\r\n    try {\r\n      this._store.dispatch(action);\r\n    } finally {\r\n      this._trigger = 'none';\r\n    }\r\n  }\r\n\r\n  private dispatchRouterDataResolved(event: ResolveEnd): void {\r\n    const routerState = this._serializer.serialize(event.state);\r\n    this.dispatchRouterAction(new RouterDataResolved(routerState, event, this._trigger));\r\n  }\r\n\r\n  private reset(): void {\r\n    this._trigger = 'none';\r\n    this._storeState = null;\r\n    this._routerState = null;\r\n  }\r\n\r\n  /**\r\n   * No sense to mess up the `setUpRouterEventsListener` method as we have\r\n   * to perform this check only once and unsubscribe after the first event\r\n   * is triggered\r\n   */\r\n  private checkInitialNavigationOnce(): void {\r\n    if (isAngularInTestMode()) {\r\n      return;\r\n    }\r\n\r\n    this._router.events\r\n      .pipe(first((event): event is RoutesRecognized => event instanceof RoutesRecognized))\r\n      .subscribe(({ url }) => {\r\n        // `location.pathname` always equals manually entered URL in the address bar\r\n        // e.g. `location.pathname === '/foo'`, but the `router` state has been initialized\r\n        // with another URL (e.g. used in combination with `NgxsStoragePlugin`), thus the\r\n        // `RouterNavigation` action will be dispatched and the user will be redirected to the\r\n        // previously saved URL. We want to prevent such behavior, so we perform this check\r\n\r\n        // `url` is a recognized URL by the Angular's router, while `currentUrl` is an actual URL\r\n        // entered in the browser's address bar\r\n        // `PathLocationStrategy.prototype.path()` returns a concatenation of\r\n        // `PlatformLocation.pathname` and normalized `PlatformLocation.search`.\r\n\r\n        // `Location.prototype.normalize` strips base href from the URL,\r\n        // if `baseHref` (declared in angular.json) for example is `/en`\r\n        // and the URL is `/test#anchor` - then `_locationStrategy.path(true)` will return `/en/test#anchor`,\r\n        // but `/en/test#anchor` is not known to the Angular's router, so we have to strip `/en`\r\n        // from the URL\r\n        const currentUrl = this._location.normalize(this._locationStrategy.path(true));\r\n        const currentUrlTree = this._urlSerializer.parse(currentUrl);\r\n        // We need to serialize the URL because in that example `/test/?redirect=https://google.com/`\r\n        // Angular will recognize it as `/test?redirect=https:%2F%2Fwww.google.com%2F`\r\n        // so we have to run the `currentUrl` via the `UrlSerializer` that will encode characters\r\n        const currentSerializedUrl = this._urlSerializer.serialize(currentUrlTree);\r\n\r\n        // If URLs differ from each other - we've got to perform a redirect to the manually entered URL\r\n        // in the address bar, as it must have a priority\r\n        if (currentSerializedUrl !== url) {\r\n          this._router.navigateByUrl(currentUrl);\r\n        }\r\n      });\r\n  }\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { NgxsModule } from '@ngxs/store';\r\n\r\nimport { RouterState } from './router.state';\r\nimport { DefaultRouterStateSerializer, RouterStateSerializer } from './serializer';\r\n\r\n@NgModule({\r\n  imports: [NgxsModule.forFeature([RouterState])]\r\n})\r\nexport class NgxsRouterPluginModule {\r\n  static forRoot(): ModuleWithProviders<NgxsRouterPluginModule> {\r\n    return {\r\n      ngModule: NgxsRouterPluginModule,\r\n      providers: [{ provide: RouterStateSerializer, useClass: DefaultRouterStateSerializer }]\r\n    };\r\n  }\r\n}\r\n"]}